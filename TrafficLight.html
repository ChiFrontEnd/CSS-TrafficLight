<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Glassmorph Traffic Light</title>
  <style>
    :root{
      --bg1: #0b1020;
      --bg2: #12192f;
      --glass: rgba(255,255,255,0.12);
      --border: rgba(255,255,255,0.35);
      --highlight: rgba(255,255,255,0.65);

      --red: #ff3b3b;
      --yellow: #ffd166;
      --green: #2ee59d;

      --off-opacity: 0.12;
      --on-opacity: 0.95;

      --ring: rgba(255,255,255,0.25);
      --inner-shadow: rgba(0,0,0,0.35);
    }

    /* Background: soft gradients + grain for a subtle digital feel */
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(1200px 600px at 20% 10%, #1b2a52 0%, #12192f 50%, #0b1020 100%),
        linear-gradient(135deg, #0b1020, #12192f);
      color:#e6eaf3;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      overflow:hidden;
    }
    /* Subtle animated light bands in the background */
    .ambient-lines{
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        linear-gradient(120deg, transparent 0% 45%, rgba(255,255,255,0.05) 50%, transparent 55% 100%),
        linear-gradient(-30deg, transparent 0% 60%, rgba(255,255,255,0.04) 66%, transparent 72% 100%);
      mix-blend-mode: screen;
      animation: drift 9s linear infinite;
      opacity: 0.6;
    }
    @keyframes drift{
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-12px); }
      100% { transform: translateY(0); }
    }

    /* Container with soft spotlight */
    .stage{
      position:relative;
      display:flex;
      align-items:center;
      gap:22px;
      padding:40px;
    }
    .stage::before{
      content:"";
      position:absolute;
      width:480px; height:480px;
      border-radius:50%;
      background: radial-gradient(closest-side, rgba(46, 229, 157, 0.08), transparent 70%);
      filter: blur(22px);
      z-index:-1;
    }

    /* Traffic light shell: glassmorphism + subtle bevel */
    .traffic-light{
      width:160px;
      padding:26px 22px;
      border-radius:24px;
      background: linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06));
      backdrop-filter: blur(14px) saturate(120%);
      -webkit-backdrop-filter: blur(14px) saturate(120%);
      border: 1px solid var(--border);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.35),
        inset 0 -10px 30px rgba(0,0,0,0.25),
        0 20px 40px rgba(0,0,0,0.35),
        0 0 0 12px rgba(255,255,255,0.03);
      display:grid;
      gap:18px;
      position:relative;
      isolation:isolate;
    }

    /* Decorative screws for industrial flair */
    .screws{
      position:absolute;
      inset: 10px 10px auto auto;
      display:flex; gap:8px;
      opacity:0.6;
    }
    .screw{
      width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at 30% 35%, #cfd5e6 0%, #8f97a9 55%, #5a6272 100%);
      box-shadow: inset 0 1px 1px rgba(0,0,0,0.5);
    }
    .screws.bottom{
      inset: auto auto 10px 10px;
    }

    /* Light segments */
    .lamp{
      position:relative;
      width:100%;
      aspect-ratio: 1 / 1;   /* perfect circle */
      border-radius:50%;
      background: radial-gradient(120px at 50% 45%, rgba(255,255,255,0.12), rgba(0,0,0,0.4));
      box-shadow:
        inset 0 12px 30px var(--inner-shadow),
        inset 0 -8px 18px rgba(255,255,255,0.05),
        0 6px 16px rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.2);
      overflow:hidden;
    }

    /* Inner LED core and glow */
    .lamp::before{
      content:"";
      position:absolute; inset: 10% 10%;
      border-radius:50%;
      filter: blur(6px);
      opacity: var(--off-opacity);
      transition: opacity 350ms ease, transform 350ms ease, box-shadow 350ms ease;
    }
    .lamp::after{
      content:"";
      position:absolute; inset: -20% -20%;
      border-radius:50%;
      filter: blur(18px);
      opacity:0;
      transition: opacity 350ms ease;
    }

    /* Fine concentric rings for a digital sensor feel */
    .rings{
      position:absolute; inset: 18% 18%;
      border-radius:50%;
      box-shadow:
        0 0 0 2px var(--ring),
        0 0 0 10px rgba(255,255,255,0.08),
        inset 0 0 22px rgba(255,255,255,0.08);
      pointer-events:none;
    }

    /* Light colors */
    .lamp.red::before   { background: radial-gradient(circle at 50% 40%, #fff 0%, var(--red) 12%, #b10000 65%, #570000 100%); }
    .lamp.red::after    { background: radial-gradient(circle, var(--red) 0%, transparent 60%); }
    .lamp.yellow::before{ background: radial-gradient(circle at 50% 40%, #fff 0%, var(--yellow) 16%, #c8a032 65%, #5a4a18 100%); }
    .lamp.yellow::after { background: radial-gradient(circle, var(--yellow) 0%, transparent 60%); }
    .lamp.green::before { background: radial-gradient(circle at 50% 40%, #fff 0%, var(--green) 18%, #1aa870 65%, #0b3f2b 100%); }
    .lamp.green::after  { background: radial-gradient(circle, var(--green) 0%, transparent 60%); }

    /* Active states (toggled via classes) */
    .lamp.active::before{
      opacity: var(--on-opacity);
      transform: scale(1.02);
      box-shadow: 0 0 18px rgba(255,255,255,0.5);
    }
    .lamp.active::after{
      opacity: 0.65;
    }

    /* Soft glossy highlight strip */
    .gloss{
      position:absolute; inset: 0;
      pointer-events:none;
    }
    .gloss::before{
      content:"";
      position:absolute; left:6%; top:6%;
      width: 28%; height: 88%;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.28), rgba(255,255,255,0.06));
      filter: blur(1.2px);
      mix-blend-mode: screen;
      opacity:0.7;
    }

    /* Label + control panel */
    .panel{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .title{
      font-weight:700;
      letter-spacing:0.02em;
      color:#cfd6ea;
      text-shadow: 0 0 24px rgba(255,255,255,0.25);
    }
    .controls{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .btn{
      padding:10px 14px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.25);
      background: linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.06));
      color:#e6eaf3;
      cursor:pointer;
      transition: transform 160ms ease, box-shadow 160ms ease, background 160ms ease;
      backdrop-filter: blur(10px) saturate(120%);
      -webkit-backdrop-filter: blur(10px) saturate(120%);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.45),
        0 6px 14px rgba(0,0,0,0.35);
    }
    .btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 10px 18px rgba(0,0,0,0.35);
      background: linear-gradient(180deg, rgba(255,255,255,0.22), rgba(255,255,255,0.08));
    }
    .btn:active{
      transform: translateY(0);
    }
    .tiny{
      font-size:12px; opacity:0.7;
    }

    /* Auto mode indicator */
    .auto-indicator{
      display:inline-flex; align-items:center; gap:8px;
      color:#a8b2cc;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      background: radial-gradient(circle, #2ee59d 0%, transparent 60%);
      box-shadow: 0 0 8px #2ee59d;
      animation: pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse{
      0%, 100% { transform:scale(0.9); opacity:0.6; }
      50%      { transform:scale(1.2); opacity:1; }
    }

    /* Responsive tweaks */
    @media (max-width: 640px){
      .stage{ flex-direction:column; padding:24px; }
      .traffic-light{ width: 82vw; max-width: 300px; }
    }
  </style>
</head>
<body>
  <div class="ambient-lines"></div>

  <div class="stage">
    <div class="traffic-light" id="light">
      <div class="screws"><span class="screw"></span><span class="screw"></span></div>
      <div class="lamp red active"><span class="rings"></span></div>
      <div class="lamp yellow"><span class="rings"></span></div>
      <div class="lamp green"><span class="rings"></span></div>
      <div class="gloss"></div>
      <div class="screws bottom"><span class="screw"></span><span class="screw"></span></div>
    </div>

    <div class="panel">
      <div class="title">Traffic Light — Glassmorph Edition</div>
      <div class="controls">
        <button class="btn" data-mode="red">Red</button>
        <button class="btn" data-mode="yellow">Yellow</button>
        <button class="btn" data-mode="green">Green</button>
        <button class="btn" id="auto">Auto</button>
        <span class="tiny">Tip: Try “Auto” for a live cycle.</span>
      </div>
      <div class="auto-indicator" id="autoStatus" style="display:none;">
        <span class="dot"></span>
        <span>Auto cycling enabled</span>
      </div>
    </div>
  </div>

  <script>
    const light = document.getElementById('light');
    const lamps = [...light.querySelectorAll('.lamp')];
    const autoBtn = document.getElementById('auto');
    const autoStatus = document.getElementById('autoStatus');

    const setActive = (index) => {
      lamps.forEach(l => l.classList.remove('active'));
      lamps[index].classList.add('active');
    };

    // Manual buttons
    document.querySelectorAll('.btn[data-mode]').forEach(btn => {
      btn.addEventListener('click', () => {
        clearInterval(window.__cycle);
        autoStatus.style.display = 'none';
        const mode = btn.getAttribute('data-mode');
        const index = { red:0, yellow:1, green:2 }[mode];
        setActive(index);
      });
    });

    // Auto cycle (Red -> Green -> Yellow)
    const cycle = () => {
      let i = lamps.findIndex(l => l.classList.contains('active'));
      if (i < 0) i = 0;
      // Red (2.5s) -> Green (3.2s) -> Yellow (1.6s)
      const next = (i === 0) ? 2 : (i === 2) ? 1 : 0;
      setActive(next);

      clearInterval(window.__cycle);
      const delay = (next === 0) ? 2500 : (next === 2) ? 3200 : 1600;
      window.__cycle = setInterval(cycle, delay);
    };

    autoBtn.addEventListener('click', () => {
      autoStatus.style.display = 'inline-flex';
      clearInterval(window.__cycle);
      window.__cycle = setInterval(cycle, 2500);
      cycle();
    });
  </script>
</body>
</html>
